<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>iOS ä¸Šçš„å±å¹•æˆªå›¾éšè— / æ˜¾ç¤ºå†…å®¹çš„ç ”ç©¶ | cloxnu&#39;s Creative Space</title>

<meta name="keywords" content="" />
<meta name="description" content="èƒŒæ™¯ åœ¨ç°ä»£æ•°å­—äº¤æµä¸­ï¼Œå±å¹•æˆªå›¾æˆä¸ºä¸€ç§å¸¸è§çš„å·¥å…·ï¼Œä¸ä»…ç”¨äºè®°å½•å’Œä¿å­˜å†…å®¹ï¼Œè¿˜å¹¿æ³›ç”¨äºåˆ†äº«ä¿¡æ¯ã€‚ä¸€ç¯‡é¢˜ä¸ºã€ŠWhy do people take Screenshots on their Smartphones?ã€‹1 çš„ç ”ç©¶è®ºæ–‡æŒ‡å‡ºï¼Œæœ‰97%çš„å—è®¿è€…æ›¾å°†æˆªå›¾å‘é€ç»™ä»–äººã€‚è¿™ä¸€æ•°æ®è¡¨æ˜ï¼Œå±å¹•æˆªå›¾ä¸ä»…ä»…æ˜¯ä¸ªäººè®°å½•çš„æ‰‹æ®µï¼Œæ›´æ˜¯ä¸€ç§é‡è¦çš„ç¤¾äº¤äº’åŠ¨æ–¹å¼ã€‚é€šè¿‡æˆªå›¾ï¼Œç”¨æˆ·èƒ½å¤Ÿå¿«é€Ÿåˆ†äº«å¯¹è¯ã€é€šçŸ¥æˆ–æœ‰ç”¨çš„å†…å®¹ï¼Œä»è€Œåœ¨ä¿¡æ¯ä¼ æ’­å’Œäº¤æµä¸­å‘æŒ¥å…³é”®ä½œç”¨ã€‚
ç„¶è€Œï¼Œå¯¹äºè¿™æ ·é«˜æ¯”ä¾‹çš„åˆ†äº«è¡Œä¸ºï¼Œç”¨æˆ·å¯èƒ½çš„ç›®çš„æœ‰ï¼š
 è®¤ä¸ºå½“å‰å±å¹•çš„å†…å®¹æœ‰è¶£ï¼Œæƒ³è¦åˆ†äº«ç»™å…¶ä»–äººï¼› è®¤ä¸ºå½“å‰å±å¹•çš„å†…å®¹ä¸ç¬¦åˆé¢„æœŸï¼Œæƒ³è¦åé¦ˆç»™å¼€å‘è€…ï¼›  äºæ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥ä»ä¸­åšå‡ºè¿™äº›äº‹ï¼š
 åœ¨ç”¨æˆ·æˆªå›¾æ—¶å°†å“ç‰Œ logo æ”¾ç½®åœ¨ä¸å½±å“å…¶ä»–å†…å®¹çš„åœ°æ–¹ï¼Œæé«˜å“ç‰Œå®£ä¼ åŠ›ï¼› å°†å±å¹•æˆªå›¾ä¸­çš„æ•æ„Ÿä¿¡æ¯éšè—èµ·æ¥ï¼Œé˜²æ­¢è¿™äº›å†…å®¹æš´éœ²ç»™å…¶ä»–äººï¼Œä¿æŠ¤ç”¨æˆ·éšç§ï¼› åœ¨éšç§åè®®å…è®¸èŒƒå›´å†…å°†è¯Šæ–­ä¿¡æ¯éšè—åœ¨æˆªå›¾ä¸­ï¼Œä»è€Œæ›´å¥½åœ°ä¼˜åŒ–äº§å“å¯èƒ½é‡åˆ°çš„é—®é¢˜ï¼›  å› æ­¤ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†å¼€å§‹ç ”ç©¶å®ç°æ–¹å¼ã€‚
ä½¿ç”¨ mask éšè— / æ˜¾ç¤ºä¿¡æ¯ æœ¬è´¨ä¸Šæ¥è®²ï¼Œæˆ‘ä»¬å¦‚æœåšåˆ°äº†å¯ä»¥åœ¨æˆªå±æ—¶éšè—ä¿¡æ¯ï¼Œé‚£ä¹Ÿå°±åŒæ ·åšåˆ°äº†æ˜¾ç¤ºä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡éšè— / æ˜¾ç¤ºè’™æ¿çš„å†…å®¹æ¥æ§åˆ¶å®é™…å†…å®¹çš„æ˜¾ç¤ºã€‚å¯¹äº SwiftUIï¼Œæœ‰ä»¥ä¸‹ä»£ç ï¼š
content .mask { ZStack { Color.white HideWhenTakingScreenshot { Color.black } } .compositingGroup() .luminanceToAlpha() } å‡è®¾æˆ‘ä»¬å·²ç»å®ç°äº† HideWhenTakingScreenshot ä¸­çš„å†…å®¹ï¼Œåœ¨å±å¹•æˆªå›¾æ—¶éšè— Color.black ï¼Œå¯¹äº content ï¼Œä¹Ÿå°±ç›¸å½“äºåœ¨å±å¹•æˆªå›¾æ—¶æ˜¾ç¤ºäº†ï¼ŒUIKit åŒç†ã€‚
åœ¨å±å¹•æˆªå›¾æ—¶éšè—ä¿¡æ¯ ç»è¿‡å±‚å±‚è¿‡æ»¤ï¼Œå…¶å®æˆ‘ä»¬çš„çœŸå®éœ€æ±‚æ˜¯å¦‚ä½•åœ¨å±å¹•æˆªå›¾æ—¶éšè—ä¿¡æ¯ã€‚
UITextField çš„ç¥å¥‡ä½œç”¨ è¯´åˆ°éšç§ä¿æŠ¤ï¼Œæˆ‘ä»¬ä¸å¾—ä¸æƒ³èµ·å½“ç”¨æˆ·åœ¨å¯†ç æ¡†ä¸­è¾“å…¥å¯†ç æ—¶ä½œä¸º iOS ç³»ç»Ÿçº§çš„ä¿æŠ¤ï¼Œä»–ä¼šåœ¨ç”¨æˆ·æˆªå±æ—¶è‡ªåŠ¨éšè—å¯†ç è¾“å…¥æ¡†ï¼Œå¦‚ä»¥ä¸‹ä»£ç æ‰€ç¤ºï¼š
struct PasswordTextView: UIViewRepresentable { @Binding var password: String? func makeUIView(context: Context) -&gt; UITextField { let textField = UITextField() textField.">
<meta name="author" content="Sidney Liu">
<link rel="canonical" href="https://clox.nu/blog/ios-screenshot-watermark/" />
<link href="/assets/css/stylesheet.min.555a4d6fef760f048c5b1bf30019b077e4b6fb2de917654189208a1f5141f43b.css" integrity="sha256-VVpNb&#43;92DwSMWxvzABmwd&#43;S2&#43;y3pF2VBiSCKH1FB9Ds=" rel="preload stylesheet"
    as="style">

<link rel="icon" href="https://clox.nu/logo/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://clox.nu/logo/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://clox.nu/logo/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://clox.nu/apple-touch-icon.png">
<link rel="mask-icon" href="https://clox.nu/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.89.2" />







<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-151087524-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<meta property="og:title" content="iOS ä¸Šçš„å±å¹•æˆªå›¾éšè— / æ˜¾ç¤ºå†…å®¹çš„ç ”ç©¶" />
<meta property="og:description" content="èƒŒæ™¯ åœ¨ç°ä»£æ•°å­—äº¤æµä¸­ï¼Œå±å¹•æˆªå›¾æˆä¸ºä¸€ç§å¸¸è§çš„å·¥å…·ï¼Œä¸ä»…ç”¨äºè®°å½•å’Œä¿å­˜å†…å®¹ï¼Œè¿˜å¹¿æ³›ç”¨äºåˆ†äº«ä¿¡æ¯ã€‚ä¸€ç¯‡é¢˜ä¸ºã€ŠWhy do people take Screenshots on their Smartphones?ã€‹1 çš„ç ”ç©¶è®ºæ–‡æŒ‡å‡ºï¼Œæœ‰97%çš„å—è®¿è€…æ›¾å°†æˆªå›¾å‘é€ç»™ä»–äººã€‚è¿™ä¸€æ•°æ®è¡¨æ˜ï¼Œå±å¹•æˆªå›¾ä¸ä»…ä»…æ˜¯ä¸ªäººè®°å½•çš„æ‰‹æ®µï¼Œæ›´æ˜¯ä¸€ç§é‡è¦çš„ç¤¾äº¤äº’åŠ¨æ–¹å¼ã€‚é€šè¿‡æˆªå›¾ï¼Œç”¨æˆ·èƒ½å¤Ÿå¿«é€Ÿåˆ†äº«å¯¹è¯ã€é€šçŸ¥æˆ–æœ‰ç”¨çš„å†…å®¹ï¼Œä»è€Œåœ¨ä¿¡æ¯ä¼ æ’­å’Œäº¤æµä¸­å‘æŒ¥å…³é”®ä½œç”¨ã€‚
ç„¶è€Œï¼Œå¯¹äºè¿™æ ·é«˜æ¯”ä¾‹çš„åˆ†äº«è¡Œä¸ºï¼Œç”¨æˆ·å¯èƒ½çš„ç›®çš„æœ‰ï¼š
 è®¤ä¸ºå½“å‰å±å¹•çš„å†…å®¹æœ‰è¶£ï¼Œæƒ³è¦åˆ†äº«ç»™å…¶ä»–äººï¼› è®¤ä¸ºå½“å‰å±å¹•çš„å†…å®¹ä¸ç¬¦åˆé¢„æœŸï¼Œæƒ³è¦åé¦ˆç»™å¼€å‘è€…ï¼›  äºæ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥ä»ä¸­åšå‡ºè¿™äº›äº‹ï¼š
 åœ¨ç”¨æˆ·æˆªå›¾æ—¶å°†å“ç‰Œ logo æ”¾ç½®åœ¨ä¸å½±å“å…¶ä»–å†…å®¹çš„åœ°æ–¹ï¼Œæé«˜å“ç‰Œå®£ä¼ åŠ›ï¼› å°†å±å¹•æˆªå›¾ä¸­çš„æ•æ„Ÿä¿¡æ¯éšè—èµ·æ¥ï¼Œé˜²æ­¢è¿™äº›å†…å®¹æš´éœ²ç»™å…¶ä»–äººï¼Œä¿æŠ¤ç”¨æˆ·éšç§ï¼› åœ¨éšç§åè®®å…è®¸èŒƒå›´å†…å°†è¯Šæ–­ä¿¡æ¯éšè—åœ¨æˆªå›¾ä¸­ï¼Œä»è€Œæ›´å¥½åœ°ä¼˜åŒ–äº§å“å¯èƒ½é‡åˆ°çš„é—®é¢˜ï¼›  å› æ­¤ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†å¼€å§‹ç ”ç©¶å®ç°æ–¹å¼ã€‚
ä½¿ç”¨ mask éšè— / æ˜¾ç¤ºä¿¡æ¯ æœ¬è´¨ä¸Šæ¥è®²ï¼Œæˆ‘ä»¬å¦‚æœåšåˆ°äº†å¯ä»¥åœ¨æˆªå±æ—¶éšè—ä¿¡æ¯ï¼Œé‚£ä¹Ÿå°±åŒæ ·åšåˆ°äº†æ˜¾ç¤ºä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡éšè— / æ˜¾ç¤ºè’™æ¿çš„å†…å®¹æ¥æ§åˆ¶å®é™…å†…å®¹çš„æ˜¾ç¤ºã€‚å¯¹äº SwiftUIï¼Œæœ‰ä»¥ä¸‹ä»£ç ï¼š
content .mask { ZStack { Color.white HideWhenTakingScreenshot { Color.black } } .compositingGroup() .luminanceToAlpha() } å‡è®¾æˆ‘ä»¬å·²ç»å®ç°äº† HideWhenTakingScreenshot ä¸­çš„å†…å®¹ï¼Œåœ¨å±å¹•æˆªå›¾æ—¶éšè— Color.black ï¼Œå¯¹äº content ï¼Œä¹Ÿå°±ç›¸å½“äºåœ¨å±å¹•æˆªå›¾æ—¶æ˜¾ç¤ºäº†ï¼ŒUIKit åŒç†ã€‚
åœ¨å±å¹•æˆªå›¾æ—¶éšè—ä¿¡æ¯ ç»è¿‡å±‚å±‚è¿‡æ»¤ï¼Œå…¶å®æˆ‘ä»¬çš„çœŸå®éœ€æ±‚æ˜¯å¦‚ä½•åœ¨å±å¹•æˆªå›¾æ—¶éšè—ä¿¡æ¯ã€‚
UITextField çš„ç¥å¥‡ä½œç”¨ è¯´åˆ°éšç§ä¿æŠ¤ï¼Œæˆ‘ä»¬ä¸å¾—ä¸æƒ³èµ·å½“ç”¨æˆ·åœ¨å¯†ç æ¡†ä¸­è¾“å…¥å¯†ç æ—¶ä½œä¸º iOS ç³»ç»Ÿçº§çš„ä¿æŠ¤ï¼Œä»–ä¼šåœ¨ç”¨æˆ·æˆªå±æ—¶è‡ªåŠ¨éšè—å¯†ç è¾“å…¥æ¡†ï¼Œå¦‚ä»¥ä¸‹ä»£ç æ‰€ç¤ºï¼š
struct PasswordTextView: UIViewRepresentable { @Binding var password: String? func makeUIView(context: Context) -&gt; UITextField { let textField = UITextField() textField." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://clox.nu/blog/ios-screenshot-watermark/" />
<meta property="article:published_time" content="2024-07-16T10:33:30+08:00" />
<meta property="article:modified_time" content="2024-07-16T10:33:30+08:00" /><meta property="og:site_name" content="cloxnu&#39;s creative space" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="iOS ä¸Šçš„å±å¹•æˆªå›¾éšè— / æ˜¾ç¤ºå†…å®¹çš„ç ”ç©¶"/>
<meta name="twitter:description" content="èƒŒæ™¯ åœ¨ç°ä»£æ•°å­—äº¤æµä¸­ï¼Œå±å¹•æˆªå›¾æˆä¸ºä¸€ç§å¸¸è§çš„å·¥å…·ï¼Œä¸ä»…ç”¨äºè®°å½•å’Œä¿å­˜å†…å®¹ï¼Œè¿˜å¹¿æ³›ç”¨äºåˆ†äº«ä¿¡æ¯ã€‚ä¸€ç¯‡é¢˜ä¸ºã€ŠWhy do people take Screenshots on their Smartphones?ã€‹1 çš„ç ”ç©¶è®ºæ–‡æŒ‡å‡ºï¼Œæœ‰97%çš„å—è®¿è€…æ›¾å°†æˆªå›¾å‘é€ç»™ä»–äººã€‚è¿™ä¸€æ•°æ®è¡¨æ˜ï¼Œå±å¹•æˆªå›¾ä¸ä»…ä»…æ˜¯ä¸ªäººè®°å½•çš„æ‰‹æ®µï¼Œæ›´æ˜¯ä¸€ç§é‡è¦çš„ç¤¾äº¤äº’åŠ¨æ–¹å¼ã€‚é€šè¿‡æˆªå›¾ï¼Œç”¨æˆ·èƒ½å¤Ÿå¿«é€Ÿåˆ†äº«å¯¹è¯ã€é€šçŸ¥æˆ–æœ‰ç”¨çš„å†…å®¹ï¼Œä»è€Œåœ¨ä¿¡æ¯ä¼ æ’­å’Œäº¤æµä¸­å‘æŒ¥å…³é”®ä½œç”¨ã€‚
ç„¶è€Œï¼Œå¯¹äºè¿™æ ·é«˜æ¯”ä¾‹çš„åˆ†äº«è¡Œä¸ºï¼Œç”¨æˆ·å¯èƒ½çš„ç›®çš„æœ‰ï¼š
 è®¤ä¸ºå½“å‰å±å¹•çš„å†…å®¹æœ‰è¶£ï¼Œæƒ³è¦åˆ†äº«ç»™å…¶ä»–äººï¼› è®¤ä¸ºå½“å‰å±å¹•çš„å†…å®¹ä¸ç¬¦åˆé¢„æœŸï¼Œæƒ³è¦åé¦ˆç»™å¼€å‘è€…ï¼›  äºæ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥ä»ä¸­åšå‡ºè¿™äº›äº‹ï¼š
 åœ¨ç”¨æˆ·æˆªå›¾æ—¶å°†å“ç‰Œ logo æ”¾ç½®åœ¨ä¸å½±å“å…¶ä»–å†…å®¹çš„åœ°æ–¹ï¼Œæé«˜å“ç‰Œå®£ä¼ åŠ›ï¼› å°†å±å¹•æˆªå›¾ä¸­çš„æ•æ„Ÿä¿¡æ¯éšè—èµ·æ¥ï¼Œé˜²æ­¢è¿™äº›å†…å®¹æš´éœ²ç»™å…¶ä»–äººï¼Œä¿æŠ¤ç”¨æˆ·éšç§ï¼› åœ¨éšç§åè®®å…è®¸èŒƒå›´å†…å°†è¯Šæ–­ä¿¡æ¯éšè—åœ¨æˆªå›¾ä¸­ï¼Œä»è€Œæ›´å¥½åœ°ä¼˜åŒ–äº§å“å¯èƒ½é‡åˆ°çš„é—®é¢˜ï¼›  å› æ­¤ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†å¼€å§‹ç ”ç©¶å®ç°æ–¹å¼ã€‚
ä½¿ç”¨ mask éšè— / æ˜¾ç¤ºä¿¡æ¯ æœ¬è´¨ä¸Šæ¥è®²ï¼Œæˆ‘ä»¬å¦‚æœåšåˆ°äº†å¯ä»¥åœ¨æˆªå±æ—¶éšè—ä¿¡æ¯ï¼Œé‚£ä¹Ÿå°±åŒæ ·åšåˆ°äº†æ˜¾ç¤ºä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡éšè— / æ˜¾ç¤ºè’™æ¿çš„å†…å®¹æ¥æ§åˆ¶å®é™…å†…å®¹çš„æ˜¾ç¤ºã€‚å¯¹äº SwiftUIï¼Œæœ‰ä»¥ä¸‹ä»£ç ï¼š
content .mask { ZStack { Color.white HideWhenTakingScreenshot { Color.black } } .compositingGroup() .luminanceToAlpha() } å‡è®¾æˆ‘ä»¬å·²ç»å®ç°äº† HideWhenTakingScreenshot ä¸­çš„å†…å®¹ï¼Œåœ¨å±å¹•æˆªå›¾æ—¶éšè— Color.black ï¼Œå¯¹äº content ï¼Œä¹Ÿå°±ç›¸å½“äºåœ¨å±å¹•æˆªå›¾æ—¶æ˜¾ç¤ºäº†ï¼ŒUIKit åŒç†ã€‚
åœ¨å±å¹•æˆªå›¾æ—¶éšè—ä¿¡æ¯ ç»è¿‡å±‚å±‚è¿‡æ»¤ï¼Œå…¶å®æˆ‘ä»¬çš„çœŸå®éœ€æ±‚æ˜¯å¦‚ä½•åœ¨å±å¹•æˆªå›¾æ—¶éšè—ä¿¡æ¯ã€‚
UITextField çš„ç¥å¥‡ä½œç”¨ è¯´åˆ°éšç§ä¿æŠ¤ï¼Œæˆ‘ä»¬ä¸å¾—ä¸æƒ³èµ·å½“ç”¨æˆ·åœ¨å¯†ç æ¡†ä¸­è¾“å…¥å¯†ç æ—¶ä½œä¸º iOS ç³»ç»Ÿçº§çš„ä¿æŠ¤ï¼Œä»–ä¼šåœ¨ç”¨æˆ·æˆªå±æ—¶è‡ªåŠ¨éšè—å¯†ç è¾“å…¥æ¡†ï¼Œå¦‚ä»¥ä¸‹ä»£ç æ‰€ç¤ºï¼š
struct PasswordTextView: UIViewRepresentable { @Binding var password: String? func makeUIView(context: Context) -&gt; UITextField { let textField = UITextField() textField."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://clox.nu/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "iOS ä¸Šçš„å±å¹•æˆªå›¾éšè— / æ˜¾ç¤ºå†…å®¹çš„ç ”ç©¶",
      "item": "https://clox.nu/blog/ios-screenshot-watermark/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "iOS ä¸Šçš„å±å¹•æˆªå›¾éšè— / æ˜¾ç¤ºå†…å®¹çš„ç ”ç©¶",
  "name": "iOS ä¸Šçš„å±å¹•æˆªå›¾éšè— \/ æ˜¾ç¤ºå†…å®¹çš„ç ”ç©¶",
  "description": "èƒŒæ™¯ åœ¨ç°ä»£æ•°å­—äº¤æµä¸­ï¼Œå±å¹•æˆªå›¾æˆä¸ºä¸€ç§å¸¸è§çš„å·¥å…·ï¼Œä¸ä»…ç”¨äºè®°å½•å’Œä¿å­˜å†…å®¹ï¼Œè¿˜å¹¿æ³›ç”¨äºåˆ†äº«ä¿¡æ¯ã€‚ä¸€ç¯‡é¢˜ä¸ºã€ŠWhy do people take Screenshots on their Smartphones?ã€‹1 çš„ç ”ç©¶è®ºæ–‡æŒ‡å‡ºï¼Œæœ‰97%çš„å—è®¿è€…æ›¾å°†æˆªå›¾å‘é€ç»™ä»–äººã€‚è¿™ä¸€æ•°æ®è¡¨æ˜ï¼Œå±å¹•æˆªå›¾ä¸ä»…ä»…æ˜¯ä¸ªäººè®°å½•çš„æ‰‹æ®µï¼Œæ›´æ˜¯ä¸€ç§é‡è¦çš„ç¤¾äº¤äº’åŠ¨æ–¹å¼ã€‚é€šè¿‡æˆªå›¾ï¼Œç”¨æˆ·èƒ½å¤Ÿ â€¦",
  "keywords": [
    
  ],
  "articleBody": "èƒŒæ™¯ åœ¨ç°ä»£æ•°å­—äº¤æµä¸­ï¼Œå±å¹•æˆªå›¾æˆä¸ºä¸€ç§å¸¸è§çš„å·¥å…·ï¼Œä¸ä»…ç”¨äºè®°å½•å’Œä¿å­˜å†…å®¹ï¼Œè¿˜å¹¿æ³›ç”¨äºåˆ†äº«ä¿¡æ¯ã€‚ä¸€ç¯‡é¢˜ä¸ºã€ŠWhy do people take Screenshots on their Smartphones?ã€‹1 çš„ç ”ç©¶è®ºæ–‡æŒ‡å‡ºï¼Œæœ‰97%çš„å—è®¿è€…æ›¾å°†æˆªå›¾å‘é€ç»™ä»–äººã€‚è¿™ä¸€æ•°æ®è¡¨æ˜ï¼Œå±å¹•æˆªå›¾ä¸ä»…ä»…æ˜¯ä¸ªäººè®°å½•çš„æ‰‹æ®µï¼Œæ›´æ˜¯ä¸€ç§é‡è¦çš„ç¤¾äº¤äº’åŠ¨æ–¹å¼ã€‚é€šè¿‡æˆªå›¾ï¼Œç”¨æˆ·èƒ½å¤Ÿå¿«é€Ÿåˆ†äº«å¯¹è¯ã€é€šçŸ¥æˆ–æœ‰ç”¨çš„å†…å®¹ï¼Œä»è€Œåœ¨ä¿¡æ¯ä¼ æ’­å’Œäº¤æµä¸­å‘æŒ¥å…³é”®ä½œç”¨ã€‚\nç„¶è€Œï¼Œå¯¹äºè¿™æ ·é«˜æ¯”ä¾‹çš„åˆ†äº«è¡Œä¸ºï¼Œç”¨æˆ·å¯èƒ½çš„ç›®çš„æœ‰ï¼š\n è®¤ä¸ºå½“å‰å±å¹•çš„å†…å®¹æœ‰è¶£ï¼Œæƒ³è¦åˆ†äº«ç»™å…¶ä»–äººï¼› è®¤ä¸ºå½“å‰å±å¹•çš„å†…å®¹ä¸ç¬¦åˆé¢„æœŸï¼Œæƒ³è¦åé¦ˆç»™å¼€å‘è€…ï¼›  äºæ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥ä»ä¸­åšå‡ºè¿™äº›äº‹ï¼š\n åœ¨ç”¨æˆ·æˆªå›¾æ—¶å°†å“ç‰Œ logo æ”¾ç½®åœ¨ä¸å½±å“å…¶ä»–å†…å®¹çš„åœ°æ–¹ï¼Œæé«˜å“ç‰Œå®£ä¼ åŠ›ï¼› å°†å±å¹•æˆªå›¾ä¸­çš„æ•æ„Ÿä¿¡æ¯éšè—èµ·æ¥ï¼Œé˜²æ­¢è¿™äº›å†…å®¹æš´éœ²ç»™å…¶ä»–äººï¼Œä¿æŠ¤ç”¨æˆ·éšç§ï¼› åœ¨éšç§åè®®å…è®¸èŒƒå›´å†…å°†è¯Šæ–­ä¿¡æ¯éšè—åœ¨æˆªå›¾ä¸­ï¼Œä»è€Œæ›´å¥½åœ°ä¼˜åŒ–äº§å“å¯èƒ½é‡åˆ°çš„é—®é¢˜ï¼›  å› æ­¤ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†å¼€å§‹ç ”ç©¶å®ç°æ–¹å¼ã€‚\nä½¿ç”¨ mask éšè— / æ˜¾ç¤ºä¿¡æ¯ æœ¬è´¨ä¸Šæ¥è®²ï¼Œæˆ‘ä»¬å¦‚æœåšåˆ°äº†å¯ä»¥åœ¨æˆªå±æ—¶éšè—ä¿¡æ¯ï¼Œé‚£ä¹Ÿå°±åŒæ ·åšåˆ°äº†æ˜¾ç¤ºä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡éšè— / æ˜¾ç¤ºè’™æ¿çš„å†…å®¹æ¥æ§åˆ¶å®é™…å†…å®¹çš„æ˜¾ç¤ºã€‚å¯¹äº SwiftUIï¼Œæœ‰ä»¥ä¸‹ä»£ç ï¼š\ncontent .mask { ZStack { Color.white HideWhenTakingScreenshot { Color.black } } .compositingGroup() .luminanceToAlpha() } å‡è®¾æˆ‘ä»¬å·²ç»å®ç°äº† HideWhenTakingScreenshot ä¸­çš„å†…å®¹ï¼Œåœ¨å±å¹•æˆªå›¾æ—¶éšè— Color.black ï¼Œå¯¹äº content ï¼Œä¹Ÿå°±ç›¸å½“äºåœ¨å±å¹•æˆªå›¾æ—¶æ˜¾ç¤ºäº†ï¼ŒUIKit åŒç†ã€‚\nåœ¨å±å¹•æˆªå›¾æ—¶éšè—ä¿¡æ¯ ç»è¿‡å±‚å±‚è¿‡æ»¤ï¼Œå…¶å®æˆ‘ä»¬çš„çœŸå®éœ€æ±‚æ˜¯å¦‚ä½•åœ¨å±å¹•æˆªå›¾æ—¶éšè—ä¿¡æ¯ã€‚\nUITextField çš„ç¥å¥‡ä½œç”¨ è¯´åˆ°éšç§ä¿æŠ¤ï¼Œæˆ‘ä»¬ä¸å¾—ä¸æƒ³èµ·å½“ç”¨æˆ·åœ¨å¯†ç æ¡†ä¸­è¾“å…¥å¯†ç æ—¶ä½œä¸º iOS ç³»ç»Ÿçº§çš„ä¿æŠ¤ï¼Œä»–ä¼šåœ¨ç”¨æˆ·æˆªå±æ—¶è‡ªåŠ¨éšè—å¯†ç è¾“å…¥æ¡†ï¼Œå¦‚ä»¥ä¸‹ä»£ç æ‰€ç¤ºï¼š\nstruct PasswordTextView: UIViewRepresentable { @Binding var password: String? func makeUIView(context: Context) - UITextField { let textField = UITextField() textField.isSecureTextEntry = true return textField } func updateUIView(_ uiView: UITextField, context: Context) { uiView.text = password } } è¿™æ˜¯ä¸€ä¸ªæœ€ç®€å•çš„ç”¨ UIKit å®ç°çš„å¯†ç æ¡†ï¼Œå¯ä»¥å°†è¿™ä¸ª PasswordTextView æ·»åŠ åˆ° SwiftUI è§†å›¾ä¸­ï¼Œäºæ˜¯æˆ‘ä»¬å‘ç°ï¼Œå½“è¾“å…¥ä¸€äº›å¯†ç åå¹¶æˆªå›¾ï¼Œå¯†ç æ¡†ä¼šåœ¨æˆªå›¾ä¸­æ¶ˆå¤±ä¸è§ã€‚\né‚£ä¹ˆè¿™æ˜¯å¦‚ä½•åšåˆ°çš„å‘¢ï¼Ÿæˆ‘æ„è¯†åˆ°ä¸€å®šæ˜¯ isSecureTextEntry è¿™ä¸ªå±æ€§åœ¨ä½œç¥Ÿï¼Œå› ä¸ºåªè¦å»æ‰è¿™ä¸€è¡Œï¼Œæˆªå›¾æ¶ˆå¤±è¿™ä¸€æ•ˆæœå°†ä¸å†èµ·ä½œç”¨ã€‚\näºæ˜¯æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ LLDB å‘½ä»¤æ‰¾åˆ° setSecureTextEntry: è¿™ä¸ªæ–¹æ³•è°ƒç”¨çš„å…·ä½“ä½ç½®ã€‚\n(lldb) image lookup -n \"-[UITextField setSecureTextEntry:]\" 1 match found in /Library/Developer/CoreSimulator/Volumes/iOS_22A5297f/Library/Developer/CoreSimulator/Profiles/Runtimes/iOS 18.0.simruntime/Contents/Resources/RuntimeRoot/System/Library/PrivateFrameworks/UIKitCore.framework/UIKitCore: Address: UIKitCore[0x00000000011406bc] (UIKitCore.__TEXT.__text + 18073272) Summary: UIKitCore`-[UITextField setSecureTextEntry:] çœ‹èµ·æ¥è¿™å‘ç”Ÿåœ¨ UIKitCore.framework ï¼Œå°†è¿™ä¸ªæ–‡ä»¶åœ¨åç¼–è¯‘è½¯ä»¶é‡Œè¿›è¡Œåç¼–è¯‘åï¼Œå¹¶æ‰¾åˆ° -[UITextField setSecureTextEntry:] ï¼Œäºæ˜¯å¾—åˆ°è¿™ä¸ªæ–¹æ³•å®ç°çš„ä¼ªä»£ç ï¼š\n/* @class UITextField */ -(int)setSecureTextEntry:(int)arg2 { r2 = arg2; r1 = arg1; r31 = r31 - 0x30; var_10 = r20; stack[-24] = r19; saved_fp = r29; stack[-8] = r30; r20 = r2; r19 = arg0; [arg0 textInputTraits]; r0 = loc_18c2b3a10(); var_18 = r0; if ([r0 isSecureTextEntry] != r20) { r2 = r20; [var_18 setSecureTextEntry:r2]; [r19 _didChangeSecureTextEntry]; } r0 = var_18; if (((stack[-8] ^ stack[-8] * 0x2) \u0026 0x40000000) != 0x0) { asm { brk #0xc471 }; r0 = loc_1868d24b4(r0, r1, r2); } else { r0 = loc_18c2b3bb0(); } return r0; } ä»è¿™æ®µä¼ªä»£ç ä¸­å¯ä»¥çœ‹å‡ºï¼Œå…¶ä¸­æœ€å…·å«Œç–‘çš„æ˜¯ 17 è¡Œçš„ [var_18 setSecureTextEntry:r2]; å’Œ 18 è¡Œçš„ [r19 _didChangeSecureTextEntry]; ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆæ’é™¤ 18 è¡Œçš„å½±å“ã€‚å› æˆ‘ä»¬å·²çŸ¥ 11 è¡Œ r19 = arg0 å³æ±‡ç¼–ä»£ç ä¸­ mov x19, x0 ï¼Œæ‰€ä»¥è¿™é‡Œçš„ r19 ç›¸å½“äºå½“å‰ UITextField å®ä¾‹ã€‚æ•…è¿™ä¸€è¡Œå®é™…æ˜¯åœ¨è°ƒç”¨ [UITextField _didChangeSecureTextEntry] ã€‚äºæ˜¯æˆ‘ä»¬åœ¨è¿™è¡Œæ‰“ä¸Šæ–­ç‚¹ï¼š\n(lldb) b -[UITextField _didChangeSecureTextEntry] Breakpoint 1: where = UIKitCore`-[UITextField _didChangeSecureTextEntry], address = 0x0000000185d95714 è¿è¡Œä»£ç ï¼Œç›´åˆ°ç¨‹åºåœåœ¨æ–­ç‚¹ä½ç½®ï¼Œéšåä½¿ç”¨å‘½ä»¤ï¼š\n(lldb) thread return ç›´æ¥è¿”å›å½“å‰å‡½æ•°ã€‚ç„¶åç»§ç»­è¿è¡Œä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ–‡æœ¬æ¡†çš„å¯†ç ç‰¹æ€§å°†ä¸å†ç”Ÿæ•ˆï¼Œæˆªå›¾ä¹Ÿä¸å†éšè—ï¼Œäºæ˜¯æˆ‘ä»¬æ–­å®šå…·ä½“ç”Ÿæ•ˆä½ç½®æ˜¯åœ¨ [UITextField _didChangeSecureTextEntry] å†…éƒ¨ã€‚\nè¯æ˜ åœ¨æºä»£ç ä¸­æˆ‘ä»¬ä½¿ç”¨ Objective-C å®šä¹‰ SWTextField ï¼Œç»§æ‰¿ UITextField ï¼Œå£°æ˜ _didChangeSecureTextEntry å¹¶è¦†å†™ isSecureTextEntry get æ–¹æ³•ï¼š\n@interface SWTextField : UITextField - (void)_didChangeSecureTextEntry; @end @implementation SWTextField - (BOOL)isSecureTextEntry { return YES; } @end ç„¶åå°† PasswordTextView æ”¹æˆï¼š\nstruct PasswordTextView: UIViewRepresentable { @Binding var password: String? func makeUIView(context: Context) - UITextField { let textField = SWTextField() textField._didChangeSecureTextEntry() return textField } func updateUIView(_ uiView: UITextField, context: Context) { uiView.text = password } } å³å¯çœ‹åˆ°èƒ½å¤Ÿè¯æ˜ _didChangeSecureTextEntry æ–¹æ³•æ˜¯æœ‰æ•ˆçš„ã€‚\nDive into [UITextField _didChangeSecureTextEntry] å›åˆ°æ–­ç‚¹ [UITextField _didChangeSecureTextEntryï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ Xcode ä¸­çœ‹åˆ°ï¼š\nUIKitCore`-[UITextField _didChangeSecureTextEntry]: 0x185d95714 0: sub sp, sp, #0x50 0x185d95718 4: stp x24, x23, [sp, #0x10] 0x185d9571c 8: stp x22, x21, [sp, #0x20] 0x185d95720 12: stp x20, x19, [sp, #0x30] 0x185d95724 16: stp x29, x30, [sp, #0x40] 0x185d95728 20: add x29, sp, #0x40 0x185d9572c 24: mov x19, x0 0x185d95730 28: bl 0x1867a1ac0 ; objc_msgSend$_setNeedsStyleRecalc 0x185d95734 32: mov x0, x19 0x185d95738 36: bl 0x1867acb20 ; objc_msgSend$_shouldObscureInput 0x185d9573c 40: mov x20, x0 0x185d95740 44: adrp x22, 417875 0x185d95744 48: add x22, x22, #0xa48 ; _MergedGlobals + 132 0x185d95748 52: ldrsw x8, [x22, #0x40] 0x185d9574c 56: ldr x0, [x19, x8] 0x185d95750 60: mov x2, x20 0x185d95754 64: bl 0x18688aae0 ; objc_msgSend$setDocumentObscured: 0x185d95758 68: mov x0, x19 0x185d9575c 72: bl 0x18675d0a0 ; objc_msgSend$_fieldEditor 0x185d95760 76: bl 0x18607f9d0 ; symbol stub for: objc_claimAutoreleasedReturnValue 0x185d95764 80: mov x21, x0 0x185d95768 84: mov x0, x19 0x185d9576c 88: bl 0x18683da20 ; objc_msgSend$isSecureTextEntry 0x185d95770 92: mov x2, x0 0x185d95774 96: mov x0, x21 0x185d95778 100: bl 0x1868a9e20 ; objc_msgSend$setSecureTextEntry: 0x185d9577c 104: bl 0x18607fb50 ; symbol stub for: objc_release_x21 0x185d95780 108: mov w8, #0x12 ; =18 0x185d95784 112: cmp w20, #0x0 0x185d95788 116: csel w21, w8, wzr, ne 0x185d9578c 120: ldrsw x8, [x22] 0x185d95790 124: ldr x0, [x19, x8] - 0x185d95794 128: bl 0x186844600 ; objc_msgSend$layer 0x185d95798 132: bl 0x18607f9d0 ; symbol stub for: objc_claimAutoreleasedReturnValue 0x185d9579c 136: mov x22, x0 0x185d957a0 140: mov x2, x21 0x185d957a4 144: bl 0x186889ba0 ; objc_msgSend$setDisableUpdateMask: 0x185d957a8 148: bl 0x18607fb5c ; symbol stub for: objc_release_x22 0x185d957ac 152: adrp x24, 371432 0x185d957b0 156: ldr x0, [x24, #0x6d8] 0x185d957b4 160: bl 0x1867d0b80 ; objc_msgSend$activeInstance 0x185d957b8 164: bl 0x18607f9d0 ; symbol stub for: objc_claimAutoreleasedReturnValue 0x185d957bc 168: mov x21, x0 0x185d957c0 172: bl 0x186833120 ; objc_msgSend$inputDelegateManager 0x185d957c4 176: bl 0x18607f9d0 ; symbol stub for: objc_claimAutoreleasedReturnValue 0x185d957c8 180: mov x22, x0 0x185d957cc 184: bl 0x186840c00 ; objc_msgSend$keyInputDelegate 0x185d957d0 188: bl 0x18607f9d0 ; symbol stub for: objc_claimAutoreleasedReturnValue 0x185d957d4 192: mov x23, x0 0x185d957d8 196: bl 0x18607fb68 ; symbol stub for: objc_release_x23 0x185d957dc 200: bl 0x18607fb5c ; symbol stub for: objc_release_x22 0x185d957e0 204: bl 0x18607fb50 ; symbol stub for: objc_release_x21 0x185d957e4 208: cmp x23, x19 0x185d957e8 212: b.ne 0x185d95808 ; 244 0x185d957ec 216: ldr x0, [x24, #0x6d8] 0x185d957f0 220: bl 0x1867d0b80 ; objc_msgSend$activeInstance 0x185d957f4 224: bl 0x18607f9d0 ; symbol stub for: objc_claimAutoreleasedReturnValue 0x185d957f8 228: mov x21, x0 0x185d957fc 232: mov x2, x19 0x185d95800 236: bl 0x186888640 ; objc_msgSend$setDelegate: 0x185d95804 240: bl 0x18607fb50 ; symbol stub for: objc_release_x21 0x185d95808 244: adrp x8, 371433 0x185d9580c 248: ldr x21, [x8, #0x398] 0x185d95810 252: mov x0, x19 0x185d95814 256: bl 0x186878b60 ; objc_msgSend$semanticContentAttribute 0x185d95818 260: mov x2, x0 0x185d9581c 264: mov x0, x21 0x185d95820 268: bl 0x1868e3b40 ; objc_msgSend$userInterfaceLayoutDirectionForSemanticContentAttribute: 0x185d95824 272: cmp x0, #0x1 0x185d95828 276: b.ne 0x185d95848 ; 308 0x185d9582c 280: mov x0, x19 0x185d95830 284: bl 0x1868d07c0 ; objc_msgSend$textAlignment 0x185d95834 288: cmp x0, #0x4 0x185d95838 292: b.ne 0x185d95848 ; 308 0x185d9583c 296: mov x0, x19 0x185d95840 300: mov w2, #0x2 ; =2 0x185d95844 304: bl 0x1868b1ba0 ; objc_msgSend$setTextAlignment: 0x185d95848 308: cbz w20, 0x185d95860 ; 332 0x185d9584c 312: mov x0, x19 0x185d95850 316: bl 0x1868786c0 ; objc_msgSend$selectionRange 0x185d95854 320: cbz x1, 0x185d95860 ; 332 0x185d95858 324: mov x0, x19 0x185d9585c 328: bl 0x186876fc0 ; objc_msgSend$selectAll 0x185d95860 332: mov x0, x19 0x185d95864 336: bl 0x1868359e0 ; objc_msgSend$interactionAssistant 0x185d95868 340: bl 0x18607f9d0 ; symbol stub for: objc_claimAutoreleasedReturnValue 0x185d9586c 344: str x0, [sp, #0x8] 0x185d95870 348: bl 0x1868de180 ; objc_msgSend$updateDisplayedSelection 0x185d95874 352: ldr x0, [sp, #0x8] 0x185d95878 356: ldp x29, x30, [sp, #0x40] 0x185d9587c 360: ldp x20, x19, [sp, #0x30] 0x185d95880 364: ldp x22, x21, [sp, #0x20] 0x185d95884 368: ldp x24, x23, [sp, #0x10] 0x185d95888 372: add sp, sp, #0x50 0x185d9588c 376: b 0x18607fb08 ; symbol stub for: objc_release å¯¹äºè¿™æ®µç¨‹åºï¼Œæœ‰ 3 å¤„ä½ç½®å€¼å¾—æ³¨æ„ï¼š\n 18è¡Œçš„ setDocumentObsecured: 27è¡Œçš„ setSecureTextEntry: 38è¡Œçš„ setDisableUpdateMask:  ä¸ºäº†ç­›é€‰è¿™äº›ä»£ç æ˜¯å“ªé‡ŒçœŸæ­£æœ‰æ•ˆï¼Œæˆ‘ä»¬å¯ä»¥å•æ­¥è°ƒè¯•åˆ°è¿™äº›è¡Œï¼Œç„¶åä½¿ç”¨å‘½ä»¤\n(lldb) thread return è·³è¿‡å…¶åçš„ä»£ç ï¼Œé€šè¿‡å½“å‰æˆªå±æ˜¯å¦æ­£å¸¸ç”Ÿæ•ˆæ¥ç¡®å®šè¿è¡Œè¿‡çš„ä»£ç æ˜¯å¦èµ·ä½œç”¨ã€‚\næ— è®ºæˆ‘ä»¬å®šä½åˆ° 18 è¡Œè¿˜æ˜¯ 27 è¡Œï¼Œåœ¨ä½¿ç”¨ thread return å‘½ä»¤åéƒ½ä¼šå‡ºç°åœ¨å¯†ç è¾“å…¥æ¡†è¾“å…¥çš„æ–‡å­—æ˜¯ â€œÂ·\"ï¼Œè€Œæˆªå±åçš„è¿™äº›å­—ç¬¦å¹¶ä¸ä¼šæ¶ˆå¤±ã€‚ç›´åˆ°ç¬¬ 38 è¡Œã€‚\näºæ˜¯æˆ‘ä»¬æ–­ç‚¹åˆ°ç¬¬ 38 è¡Œï¼Œè¾“å…¥å‘½ä»¤\n(lldb) po $x0 0x600000287100; position = CGPoint (0 0); bounds = CGRect (0 0; 0 0); delegate = 0x111021eb0; frame = (0 0; 0 0); layer = 0x600000287100; opaque = YES; allowsGroupOpacity = YES;  å¾—çŸ¥å½“å‰è°ƒç”¨ setDisableUpdateMask: æ˜¯ CALayer ã€‚ç„¶åå†å°è¯•æ–­ç‚¹ç¬¬ 34 è¡Œï¼Œå¹¶å†æ¬¡è¾“å…¥\n(lldb) po $x0 = (0 0; 0 0); layer =  å¾—çŸ¥å¯¹åº” view æ˜¯ _UITextLayoutCanvasView ï¼Œå¹¶è·Ÿæ®åç¼–è¯‘ç»“æœ\n[*(r19 + sign_extend_64(*(int32_t *)0x1e68ec204)) layer]; ç„¶åæŸ¥æ‰¾åœ°å€ 0x1e68ec204 åï¼Œå‘ç°æ˜¯åŸ UITextField çš„ä¸€ä¸ªå­ viewï¼š-[UITextField _textCanvasView]ã€‚\nå› æ­¤æˆ‘æœ‰ä¸€ä¸ªå¤§èƒ†çš„çŒœæµ‹ï¼Œåªéœ€è°ƒç”¨ä»»æ„ CALayer çš„ setDisableUpdateMask: æ–¹æ³•å³å¯åœ¨æˆªå±éšè—å½“å‰ CALayer çš„å†…å®¹ï¼Œå…¶å¯¹åº”å‚æ•°æ˜¯å­˜å‚¨åœ¨ x2 å¯„å­˜å™¨å­˜å‚¨çš„å€¼ã€‚è€Œ x2 çš„å€¼æ˜¯åœ¨ 29 è¡Œ mov w8, #0x12 èµ‹å€¼çš„ã€‚äºæ˜¯çŒœæµ‹è¯¥æ–¹æ³•çš„å‚æ•°æ˜¯ä¸€ä¸ªæšä¸¾å€¼ã€‚åœ¨è¿™é‡Œè¯¥å€¼ä¸º 0x12 ã€‚\nå› æ­¤ï¼Œç»™ CALayer æ‰©å±•è¯¥æ–¹æ³•ï¼š\n@interface CALayer () - (void)setDisableUpdateMask:(unsigned int)aValue; @end ç„¶åæˆ‘ä»¬å¯ä»¥å®ç°ä¹‹å‰æœªå®Œæˆçš„ HideWhenTakingScreenshot ï¼Œå¹¶ç»™ setDisableUpdateMask æ–¹æ³•ä¼ å…¥å‚æ•°0x12 ï¼š\nstruct HideWhenTakingScreenshot: UIViewRepresentable { var color: UIColor = .black func makeUIView(context: Context) - UIView { let view = UIView() view.layer.setDisableUpdateMask(0x12) return view } func updateUIView(_ uiView: UIView, context: Context) { uiView.backgroundColor = color } } æœ€åï¼Œåªéœ€è¦å°† content å®ç°ä¸ºæƒ³è¦çš„æ•ˆæœå³å¯ï¼Œæ¯”å¦‚ Text(\"Watermark\") ï¼š\nText(\"Watermark\") .mask { ZStack { Color.white HideWhenTakingScreenshot() } .compositingGroup() .luminanceToAlpha() }  ",
  "wordCount" : "1145",
  "inLanguage": "en",
  "datePublished": "2024-07-16T10:33:30+08:00",
  "dateModified": "2024-07-16T10:33:30+08:00",
  "author":{
    "@type": "Person",
    "name": "Sidney Liu"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://clox.nu/blog/ios-screenshot-watermark/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "cloxnu's Creative Space",
    "logo": {
      "@type": "ImageObject",
      "url": "https://clox.nu/logo/favicon.ico"
    }
  }
}
</script>





</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>
<noscript>
    <style type="text/css">
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript>
<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://clox.nu/" accesskey="h" title="I&#39;m cloxnu (Alt + H)">
                <img src="/logo/logo.svg" alt="logo" aria-label="logo"
                    height="35">I&#39;m cloxnu</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                
                
            </span>
        </div>
        <ul id="menu" onscroll="menu_on_scroll()">
            <li>
                <a href="https://clox.nu/news/" title="ğŸ“° ğ•¹ğ–Šğ–œğ–˜">
                    <span>ğŸ“° ğ•¹ğ–Šğ–œğ–˜</span>
                </a>
            </li>
            <li>
                <a href="https://clox.nu/archive/" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://clox.nu/categories/" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
            <li>
                <a href="https://about.clox.nu" title="About">
                    <span>About</span>
                </a>
            </li></ul>
    </nav>
</header>

    <main class="main">

<article class="post-single">
  <header class="post-header">

    <h1 class="post-title">
      iOS ä¸Šçš„å±å¹•æˆªå›¾éšè— / æ˜¾ç¤ºå†…å®¹çš„ç ”ç©¶
    </h1>
    <div class="post-meta">

July 16, 2024&nbsp;Â·&nbsp;6 min&nbsp;Â·&nbsp;Sidney Liu

</div>
  </header> 

  <div class="post-content">
<h2 id="èƒŒæ™¯">èƒŒæ™¯<a hidden class="anchor" aria-hidden="true" href="#èƒŒæ™¯">#</a></h2>
<p>åœ¨ç°ä»£æ•°å­—äº¤æµä¸­ï¼Œå±å¹•æˆªå›¾æˆä¸ºä¸€ç§å¸¸è§çš„å·¥å…·ï¼Œä¸ä»…ç”¨äºè®°å½•å’Œä¿å­˜å†…å®¹ï¼Œè¿˜å¹¿æ³›ç”¨äºåˆ†äº«ä¿¡æ¯ã€‚ä¸€ç¯‡é¢˜ä¸ºã€ŠWhy do people take Screenshots on their Smartphones?ã€‹<a href="%5Bhttps://dl.acm.org/doi/abs/10.1145/3563657.3596067%5D(https://dl.acm.org/doi/abs/10.1145/3563657.3596067)">1</a> çš„ç ”ç©¶è®ºæ–‡æŒ‡å‡ºï¼Œæœ‰97%çš„å—è®¿è€…æ›¾å°†æˆªå›¾å‘é€ç»™ä»–äººã€‚è¿™ä¸€æ•°æ®è¡¨æ˜ï¼Œå±å¹•æˆªå›¾ä¸ä»…ä»…æ˜¯ä¸ªäººè®°å½•çš„æ‰‹æ®µï¼Œæ›´æ˜¯ä¸€ç§é‡è¦çš„ç¤¾äº¤äº’åŠ¨æ–¹å¼ã€‚é€šè¿‡æˆªå›¾ï¼Œç”¨æˆ·èƒ½å¤Ÿå¿«é€Ÿåˆ†äº«å¯¹è¯ã€é€šçŸ¥æˆ–æœ‰ç”¨çš„å†…å®¹ï¼Œä»è€Œåœ¨ä¿¡æ¯ä¼ æ’­å’Œäº¤æµä¸­å‘æŒ¥å…³é”®ä½œç”¨ã€‚</p>
<p><img src="assets/research.png" alt="Image.png"></p>
<p>ç„¶è€Œï¼Œå¯¹äºè¿™æ ·é«˜æ¯”ä¾‹çš„åˆ†äº«è¡Œä¸ºï¼Œç”¨æˆ·å¯èƒ½çš„ç›®çš„æœ‰ï¼š</p>
<ul>
<li>è®¤ä¸ºå½“å‰å±å¹•çš„å†…å®¹æœ‰è¶£ï¼Œæƒ³è¦åˆ†äº«ç»™å…¶ä»–äººï¼›</li>
<li>è®¤ä¸ºå½“å‰å±å¹•çš„å†…å®¹ä¸ç¬¦åˆé¢„æœŸï¼Œæƒ³è¦åé¦ˆç»™å¼€å‘è€…ï¼›</li>
</ul>
<p>äºæ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥ä»ä¸­åšå‡ºè¿™äº›äº‹ï¼š</p>
<ul>
<li>åœ¨ç”¨æˆ·æˆªå›¾æ—¶å°†å“ç‰Œ logo æ”¾ç½®åœ¨ä¸å½±å“å…¶ä»–å†…å®¹çš„åœ°æ–¹ï¼Œæé«˜å“ç‰Œå®£ä¼ åŠ›ï¼›</li>
<li>å°†å±å¹•æˆªå›¾ä¸­çš„æ•æ„Ÿä¿¡æ¯éšè—èµ·æ¥ï¼Œé˜²æ­¢è¿™äº›å†…å®¹æš´éœ²ç»™å…¶ä»–äººï¼Œä¿æŠ¤ç”¨æˆ·éšç§ï¼›</li>
<li>åœ¨éšç§åè®®å…è®¸èŒƒå›´å†…å°†è¯Šæ–­ä¿¡æ¯éšè—åœ¨æˆªå›¾ä¸­ï¼Œä»è€Œæ›´å¥½åœ°ä¼˜åŒ–äº§å“å¯èƒ½é‡åˆ°çš„é—®é¢˜ï¼›</li>
</ul>
<p>å› æ­¤ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†å¼€å§‹ç ”ç©¶å®ç°æ–¹å¼ã€‚</p>
<h2 id="ä½¿ç”¨-mask-éšè—--æ˜¾ç¤ºä¿¡æ¯">ä½¿ç”¨ mask éšè— / æ˜¾ç¤ºä¿¡æ¯<a hidden class="anchor" aria-hidden="true" href="#ä½¿ç”¨-mask-éšè—--æ˜¾ç¤ºä¿¡æ¯">#</a></h2>
<p>æœ¬è´¨ä¸Šæ¥è®²ï¼Œæˆ‘ä»¬å¦‚æœåšåˆ°äº†å¯ä»¥åœ¨æˆªå±æ—¶éšè—ä¿¡æ¯ï¼Œé‚£ä¹Ÿå°±åŒæ ·åšåˆ°äº†æ˜¾ç¤ºä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡éšè— / æ˜¾ç¤ºè’™æ¿çš„å†…å®¹æ¥æ§åˆ¶å®é™…å†…å®¹çš„æ˜¾ç¤ºã€‚å¯¹äº SwiftUIï¼Œæœ‰ä»¥ä¸‹ä»£ç ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift">content
    .mask {
        ZStack {
            Color.white
            HideWhenTakingScreenshot {
                Color.black
            }
        }
        .compositingGroup()
        .luminanceToAlpha()
    }
</code></pre></div><p>å‡è®¾æˆ‘ä»¬å·²ç»å®ç°äº† <code>HideWhenTakingScreenshot</code> ä¸­çš„å†…å®¹ï¼Œåœ¨å±å¹•æˆªå›¾æ—¶éšè— <code>Color.black</code> ï¼Œå¯¹äº <code>content</code> ï¼Œä¹Ÿå°±ç›¸å½“äºåœ¨å±å¹•æˆªå›¾æ—¶æ˜¾ç¤ºäº†ï¼ŒUIKit åŒç†ã€‚</p>
<h2 id="åœ¨å±å¹•æˆªå›¾æ—¶éšè—ä¿¡æ¯">åœ¨å±å¹•æˆªå›¾æ—¶éšè—ä¿¡æ¯<a hidden class="anchor" aria-hidden="true" href="#åœ¨å±å¹•æˆªå›¾æ—¶éšè—ä¿¡æ¯">#</a></h2>
<p>ç»è¿‡å±‚å±‚è¿‡æ»¤ï¼Œå…¶å®æˆ‘ä»¬çš„çœŸå®éœ€æ±‚æ˜¯å¦‚ä½•åœ¨å±å¹•æˆªå›¾æ—¶éšè—ä¿¡æ¯ã€‚</p>
<h3 id="uitextfield-çš„ç¥å¥‡ä½œç”¨"><code>UITextField</code> çš„ç¥å¥‡ä½œç”¨<a hidden class="anchor" aria-hidden="true" href="#uitextfield-çš„ç¥å¥‡ä½œç”¨">#</a></h3>
<p>è¯´åˆ°éšç§ä¿æŠ¤ï¼Œæˆ‘ä»¬ä¸å¾—ä¸æƒ³èµ·å½“ç”¨æˆ·åœ¨å¯†ç æ¡†ä¸­è¾“å…¥å¯†ç æ—¶ä½œä¸º iOS ç³»ç»Ÿçº§çš„ä¿æŠ¤ï¼Œä»–ä¼šåœ¨ç”¨æˆ·æˆªå±æ—¶è‡ªåŠ¨éšè—å¯†ç è¾“å…¥æ¡†ï¼Œå¦‚ä»¥ä¸‹ä»£ç æ‰€ç¤ºï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">PasswordTextView</span>: UIViewRepresentable {
    @Binding <span style="color:#66d9ef">var</span> password: String?
    
    <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">makeUIView</span>(context: Context) -&gt; UITextField {
        <span style="color:#66d9ef">let</span> textField = UITextField()
        textField.isSecureTextEntry = <span style="color:#66d9ef">true</span>
        <span style="color:#66d9ef">return</span> textField
    }
    
    <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">updateUIView</span>(<span style="color:#66d9ef">_</span> uiView: UITextField, context: Context) {
        uiView.text = password
    }
}
</code></pre></div><p>è¿™æ˜¯ä¸€ä¸ªæœ€ç®€å•çš„ç”¨ UIKit å®ç°çš„å¯†ç æ¡†ï¼Œå¯ä»¥å°†è¿™ä¸ª <code>PasswordTextView</code> æ·»åŠ åˆ° SwiftUI è§†å›¾ä¸­ï¼Œäºæ˜¯æˆ‘ä»¬å‘ç°ï¼Œå½“è¾“å…¥ä¸€äº›å¯†ç åå¹¶æˆªå›¾ï¼Œå¯†ç æ¡†ä¼šåœ¨æˆªå›¾ä¸­æ¶ˆå¤±ä¸è§ã€‚</p>
<p><img src="assets/password.png" alt="password"></p>
<p>é‚£ä¹ˆè¿™æ˜¯å¦‚ä½•åšåˆ°çš„å‘¢ï¼Ÿæˆ‘æ„è¯†åˆ°ä¸€å®šæ˜¯ <code>isSecureTextEntry</code> è¿™ä¸ªå±æ€§åœ¨ä½œç¥Ÿï¼Œå› ä¸ºåªè¦å»æ‰è¿™ä¸€è¡Œï¼Œæˆªå›¾æ¶ˆå¤±è¿™ä¸€æ•ˆæœå°†ä¸å†èµ·ä½œç”¨ã€‚</p>
<p>äºæ˜¯æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ LLDB å‘½ä»¤æ‰¾åˆ° <code>setSecureTextEntry:</code> è¿™ä¸ªæ–¹æ³•è°ƒç”¨çš„å…·ä½“ä½ç½®ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift">(lldb) image lookup <span style="color:#f92672">-</span>n <span style="color:#e6db74">&#34;-[UITextField setSecureTextEntry:]&#34;</span>
<span style="color:#ae81ff">1</span> match found <span style="color:#66d9ef">in</span> <span style="color:#f92672">/</span>Library<span style="color:#f92672">/</span>Developer<span style="color:#f92672">/</span>CoreSimulator<span style="color:#f92672">/</span>Volumes<span style="color:#f92672">/</span>iOS_22A5297f<span style="color:#f92672">/</span>Library<span style="color:#f92672">/</span>Developer<span style="color:#f92672">/</span>CoreSimulator<span style="color:#f92672">/</span>Profiles<span style="color:#f92672">/</span>Runtimes<span style="color:#f92672">/</span>iOS <span style="color:#ae81ff">18.0</span>.simruntime<span style="color:#f92672">/</span>Contents<span style="color:#f92672">/</span>Resources<span style="color:#f92672">/</span>RuntimeRoot<span style="color:#f92672">/</span>System<span style="color:#f92672">/</span>Library<span style="color:#f92672">/</span>PrivateFrameworks<span style="color:#f92672">/</span>UIKitCore.framework<span style="color:#f92672">/</span>UIKitCore:
        Address: UIKitCore[<span style="color:#ae81ff">0x00000000011406bc</span>] (UIKitCore.__TEXT.__text <span style="color:#f92672">+</span> <span style="color:#ae81ff">18073272</span>)
        Summary: UIKitCore`<span style="color:#f92672">-</span>[UITextField setSecureTextEntry:]
</code></pre></div><p>çœ‹èµ·æ¥è¿™å‘ç”Ÿåœ¨ <code>UIKitCore.framework</code> ï¼Œå°†è¿™ä¸ªæ–‡ä»¶åœ¨åç¼–è¯‘è½¯ä»¶é‡Œè¿›è¡Œåç¼–è¯‘åï¼Œå¹¶æ‰¾åˆ° <code>-[UITextField setSecureTextEntry:]</code> ï¼Œäºæ˜¯å¾—åˆ°è¿™ä¸ªæ–¹æ³•å®ç°çš„ä¼ªä»£ç ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#75715e">/* @class UITextField */</span>
<span style="color:#f92672">-</span>(int)setSecureTextEntry:(int)arg2 {
    r2 = arg2;
    r1 = arg1;
    r31 = r31 <span style="color:#f92672">-</span> <span style="color:#ae81ff">0x30</span>;
    var_10 = r20;
    stack[<span style="color:#f92672">-</span><span style="color:#ae81ff">24</span>] = r19;
    saved_fp = r29;
    stack[<span style="color:#f92672">-</span><span style="color:#ae81ff">8</span>] = r30;
    r20 = r2;
    r19 = arg0;
    [arg0 textInputTraits];
    r0 = loc_18c2b3a10();
    var_18 = r0;
    <span style="color:#66d9ef">if</span> ([r0 isSecureTextEntry] <span style="color:#f92672">!=</span> r20) {
            r2 = r20;
            [var_18 setSecureTextEntry:r2];
            [r19 _didChangeSecureTextEntry];
    }
    r0 = var_18;
    <span style="color:#66d9ef">if</span> (((stack[<span style="color:#f92672">-</span><span style="color:#ae81ff">8</span>] <span style="color:#f92672">^</span> stack[<span style="color:#f92672">-</span><span style="color:#ae81ff">8</span>] <span style="color:#f92672">*</span> <span style="color:#ae81ff">0x2</span>) <span style="color:#f92672">&amp;</span> <span style="color:#ae81ff">0x40000000</span>) <span style="color:#f92672">!=</span> <span style="color:#ae81ff">0x0</span>) {
            asm { brk        #<span style="color:#ae81ff">0xc471</span> };
            r0 = loc_1868d24b4(r0, r1, r2);
    }
    <span style="color:#66d9ef">else</span> {
            r0 = loc_18c2b3bb0();
    }
    <span style="color:#66d9ef">return</span> r0;
}
</code></pre></div><p>ä»è¿™æ®µä¼ªä»£ç ä¸­å¯ä»¥çœ‹å‡ºï¼Œå…¶ä¸­æœ€å…·å«Œç–‘çš„æ˜¯ 17 è¡Œçš„ <code>[var_18 setSecureTextEntry:r2];</code> å’Œ 18 è¡Œçš„ <code>[r19 _didChangeSecureTextEntry];</code> ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆæ’é™¤ 18 è¡Œçš„å½±å“ã€‚å› æˆ‘ä»¬å·²çŸ¥ 11 è¡Œ <code>r19 = arg0</code> å³æ±‡ç¼–ä»£ç ä¸­ <code>mov x19, x0</code> ï¼Œæ‰€ä»¥è¿™é‡Œçš„ <code>r19</code> ç›¸å½“äºå½“å‰ <code>UITextField</code> å®ä¾‹ã€‚æ•…è¿™ä¸€è¡Œå®é™…æ˜¯åœ¨è°ƒç”¨ <code>[UITextField _didChangeSecureTextEntry]</code> ã€‚äºæ˜¯æˆ‘ä»¬åœ¨è¿™è¡Œæ‰“ä¸Šæ–­ç‚¹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#f92672">(</span>lldb<span style="color:#f92672">)</span> b -<span style="color:#f92672">[</span>UITextField _didChangeSecureTextEntry<span style="color:#f92672">]</span>
Breakpoint 1: where <span style="color:#f92672">=</span> UIKitCore<span style="color:#e6db74">`</span>-<span style="color:#f92672">[</span>UITextField _didChangeSecureTextEntry<span style="color:#f92672">]</span>, address <span style="color:#f92672">=</span> 0x0000000185d95714
</code></pre></div><p>è¿è¡Œä»£ç ï¼Œç›´åˆ°ç¨‹åºåœåœ¨æ–­ç‚¹ä½ç½®ï¼Œéšåä½¿ç”¨å‘½ä»¤ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#f92672">(</span>lldb<span style="color:#f92672">)</span> thread <span style="color:#66d9ef">return</span>
</code></pre></div><p>ç›´æ¥è¿”å›å½“å‰å‡½æ•°ã€‚ç„¶åç»§ç»­è¿è¡Œä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ–‡æœ¬æ¡†çš„å¯†ç ç‰¹æ€§å°†ä¸å†ç”Ÿæ•ˆï¼Œæˆªå›¾ä¹Ÿä¸å†éšè—ï¼Œäºæ˜¯æˆ‘ä»¬æ–­å®šå…·ä½“ç”Ÿæ•ˆä½ç½®æ˜¯åœ¨ <code>[UITextField _didChangeSecureTextEntry]</code> å†…éƒ¨ã€‚</p>
<p><img src="assets/show-password.png" alt="show password"></p>
<h3 id="è¯æ˜">è¯æ˜<a hidden class="anchor" aria-hidden="true" href="#è¯æ˜">#</a></h3>
<p>åœ¨æºä»£ç ä¸­æˆ‘ä»¬ä½¿ç”¨ Objective-C å®šä¹‰ <code>SWTextField</code> ï¼Œç»§æ‰¿ <code>UITextField</code> ï¼Œå£°æ˜ <code>_didChangeSecureTextEntry</code> å¹¶è¦†å†™ <code>isSecureTextEntry</code> get æ–¹æ³•ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-objectivec" data-lang="objectivec"><span style="color:#66d9ef">@interface</span> <span style="color:#a6e22e">SWTextField</span> : <span style="color:#a6e22e">UITextField</span>

- (<span style="color:#66d9ef">void</span>)<span style="color:#a6e22e">_didChangeSecureTextEntry</span>;

<span style="color:#66d9ef">@end</span>

<span style="color:#66d9ef">@implementation</span> <span style="color:#a6e22e">SWTextField</span>

- (<span style="color:#66d9ef">BOOL</span>)<span style="color:#a6e22e">isSecureTextEntry</span> {
    <span style="color:#66d9ef">return</span> YES;
}

<span style="color:#66d9ef">@end</span>
</code></pre></div><p>ç„¶åå°† <code>PasswordTextView</code> æ”¹æˆï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">PasswordTextView</span>: UIViewRepresentable {
    @Binding <span style="color:#66d9ef">var</span> password: String?
    
    <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">makeUIView</span>(context: Context) -&gt; UITextField {
        <span style="color:#66d9ef">let</span> textField = SWTextField()
        textField._didChangeSecureTextEntry()
        <span style="color:#66d9ef">return</span> textField
    }
    
    <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">updateUIView</span>(<span style="color:#66d9ef">_</span> uiView: UITextField, context: Context) {
        uiView.text = password
    }
}
</code></pre></div><p>å³å¯çœ‹åˆ°èƒ½å¤Ÿè¯æ˜ <code>_didChangeSecureTextEntry</code> æ–¹æ³•æ˜¯æœ‰æ•ˆçš„ã€‚</p>
<h3 id="dive-into-uitextfield-_didchangesecuretextentry">Dive into <code>[UITextField _didChangeSecureTextEntry]</code><a hidden class="anchor" aria-hidden="true" href="#dive-into-uitextfield-_didchangesecuretextentry">#</a></h3>
<p>å›åˆ°æ–­ç‚¹ <code>[UITextField _didChangeSecureTextEntry</code>ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ Xcode ä¸­çœ‹åˆ°ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-objectivec" data-lang="objectivec">UIKitCore<span style="color:#960050;background-color:#1e0010">`</span><span style="color:#f92672">-</span>[UITextField _didChangeSecureTextEntry]<span style="color:#f92672">:</span>
    <span style="color:#ae81ff">0x185d95714</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">0</span><span style="color:#f92672">&gt;:</span>   sub    sp, sp, <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#ae81ff">0x50</span>
    <span style="color:#ae81ff">0x185d95718</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">4</span><span style="color:#f92672">&gt;:</span>   stp    x24, x23, [sp, <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#ae81ff">0x10</span>]
    <span style="color:#ae81ff">0x185d9571c</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">8</span><span style="color:#f92672">&gt;:</span>   stp    x22, x21, [sp, <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#ae81ff">0x20</span>]
    <span style="color:#ae81ff">0x185d95720</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">12</span><span style="color:#f92672">&gt;:</span>  stp    x20, x19, [sp, <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#ae81ff">0x30</span>]
    <span style="color:#ae81ff">0x185d95724</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">16</span><span style="color:#f92672">&gt;:</span>  stp    x29, x30, [sp, <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#ae81ff">0x40</span>]
    <span style="color:#ae81ff">0x185d95728</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">20</span><span style="color:#f92672">&gt;:</span>  add    x29, sp, <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#ae81ff">0x40</span>
    <span style="color:#ae81ff">0x185d9572c</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">24</span><span style="color:#f92672">&gt;:</span>  mov    x19, x0
    <span style="color:#ae81ff">0x185d95730</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">28</span><span style="color:#f92672">&gt;:</span>  bl     <span style="color:#ae81ff">0x1867a1ac0</span>               ; objc_msgSend<span style="color:#960050;background-color:#1e0010">$</span>_setNeedsStyleRecalc
    <span style="color:#ae81ff">0x185d95734</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">32</span><span style="color:#f92672">&gt;:</span>  mov    x0, x19
    <span style="color:#ae81ff">0x185d95738</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">36</span><span style="color:#f92672">&gt;:</span>  bl     <span style="color:#ae81ff">0x1867acb20</span>               ; objc_msgSend<span style="color:#960050;background-color:#1e0010">$</span>_shouldObscureInput
    <span style="color:#ae81ff">0x185d9573c</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">40</span><span style="color:#f92672">&gt;:</span>  mov    x20, x0
    <span style="color:#ae81ff">0x185d95740</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">44</span><span style="color:#f92672">&gt;:</span>  adrp   x22, <span style="color:#ae81ff">417875</span>
    <span style="color:#ae81ff">0x185d95744</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">48</span><span style="color:#f92672">&gt;:</span>  add    x22, x22, <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#ae81ff">0xa48</span>          ; _MergedGlobals <span style="color:#f92672">+</span> <span style="color:#ae81ff">132</span>
    <span style="color:#ae81ff">0x185d95748</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">52</span><span style="color:#f92672">&gt;:</span>  ldrsw  x8, [x22, <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#ae81ff">0x40</span>]
    <span style="color:#ae81ff">0x185d9574c</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">56</span><span style="color:#f92672">&gt;:</span>  ldr    x0, [x19, x8]
    <span style="color:#ae81ff">0x185d95750</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">60</span><span style="color:#f92672">&gt;:</span>  mov    x2, x20
    <span style="color:#ae81ff">0x185d95754</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">64</span><span style="color:#f92672">&gt;:</span>  bl     <span style="color:#ae81ff">0x18688aae0</span>               ; objc_msgSend<span style="color:#960050;background-color:#1e0010">$</span>setDocumentObscured:
    <span style="color:#ae81ff">0x185d95758</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">68</span><span style="color:#f92672">&gt;:</span>  mov    x0, x19
    <span style="color:#ae81ff">0x185d9575c</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">72</span><span style="color:#f92672">&gt;:</span>  bl     <span style="color:#ae81ff">0x18675d0a0</span>               ; objc_msgSend<span style="color:#960050;background-color:#1e0010">$</span>_fieldEditor
    <span style="color:#ae81ff">0x185d95760</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">76</span><span style="color:#f92672">&gt;:</span>  bl     <span style="color:#ae81ff">0x18607f9d0</span>               ; symbol stub <span style="color:#66d9ef">for</span><span style="color:#f92672">:</span> objc_claimAutoreleasedReturnValue
    <span style="color:#ae81ff">0x185d95764</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">80</span><span style="color:#f92672">&gt;:</span>  mov    x21, x0
    <span style="color:#ae81ff">0x185d95768</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">84</span><span style="color:#f92672">&gt;:</span>  mov    x0, x19
    <span style="color:#ae81ff">0x185d9576c</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">88</span><span style="color:#f92672">&gt;:</span>  bl     <span style="color:#ae81ff">0x18683da20</span>               ; objc_msgSend<span style="color:#960050;background-color:#1e0010">$</span>isSecureTextEntry
    <span style="color:#ae81ff">0x185d95770</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">92</span><span style="color:#f92672">&gt;:</span>  mov    x2, x0
    <span style="color:#ae81ff">0x185d95774</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">96</span><span style="color:#f92672">&gt;:</span>  mov    x0, x21
    <span style="color:#ae81ff">0x185d95778</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">100</span><span style="color:#f92672">&gt;:</span> bl     <span style="color:#ae81ff">0x1868a9e20</span>               ; objc_msgSend<span style="color:#960050;background-color:#1e0010">$</span>setSecureTextEntry:
    <span style="color:#ae81ff">0x185d9577c</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">104</span><span style="color:#f92672">&gt;:</span> bl     <span style="color:#ae81ff">0x18607fb50</span>               ; symbol stub <span style="color:#66d9ef">for</span><span style="color:#f92672">:</span> objc_release_x21
    <span style="color:#ae81ff">0x185d95780</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">108</span><span style="color:#f92672">&gt;:</span> mov    w8, <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#ae81ff">0x12</span>                 ; <span style="color:#f92672">=</span><span style="color:#ae81ff">18</span> 
    <span style="color:#ae81ff">0x185d95784</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">112</span><span style="color:#f92672">&gt;:</span> cmp    w20, <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#ae81ff">0x0</span>
    <span style="color:#ae81ff">0x185d95788</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">116</span><span style="color:#f92672">&gt;:</span> csel   w21, w8, wzr, ne
    <span style="color:#ae81ff">0x185d9578c</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">120</span><span style="color:#f92672">&gt;:</span> ldrsw  x8, [x22]
    <span style="color:#ae81ff">0x185d95790</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">124</span><span style="color:#f92672">&gt;:</span> ldr    x0, [x19, x8]
<span style="color:#f92672">-&gt;</span>  <span style="color:#ae81ff">0x185d95794</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">128</span><span style="color:#f92672">&gt;:</span> bl     <span style="color:#ae81ff">0x186844600</span>               ; objc_msgSend<span style="color:#960050;background-color:#1e0010">$</span>layer
    <span style="color:#ae81ff">0x185d95798</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">132</span><span style="color:#f92672">&gt;:</span> bl     <span style="color:#ae81ff">0x18607f9d0</span>               ; symbol stub <span style="color:#66d9ef">for</span><span style="color:#f92672">:</span> objc_claimAutoreleasedReturnValue
    <span style="color:#ae81ff">0x185d9579c</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">136</span><span style="color:#f92672">&gt;:</span> mov    x22, x0
    <span style="color:#ae81ff">0x185d957a0</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">140</span><span style="color:#f92672">&gt;:</span> mov    x2, x21
    <span style="color:#ae81ff">0x185d957a4</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">144</span><span style="color:#f92672">&gt;:</span> bl     <span style="color:#ae81ff">0x186889ba0</span>               ; objc_msgSend<span style="color:#960050;background-color:#1e0010">$</span>setDisableUpdateMask:
    <span style="color:#ae81ff">0x185d957a8</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">148</span><span style="color:#f92672">&gt;:</span> bl     <span style="color:#ae81ff">0x18607fb5c</span>               ; symbol stub <span style="color:#66d9ef">for</span><span style="color:#f92672">:</span> objc_release_x22
    <span style="color:#ae81ff">0x185d957ac</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">152</span><span style="color:#f92672">&gt;:</span> adrp   x24, <span style="color:#ae81ff">371432</span>
    <span style="color:#ae81ff">0x185d957b0</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">156</span><span style="color:#f92672">&gt;:</span> ldr    x0, [x24, <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#ae81ff">0x6d8</span>]
    <span style="color:#ae81ff">0x185d957b4</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">160</span><span style="color:#f92672">&gt;:</span> bl     <span style="color:#ae81ff">0x1867d0b80</span>               ; objc_msgSend<span style="color:#960050;background-color:#1e0010">$</span>activeInstance
    <span style="color:#ae81ff">0x185d957b8</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">164</span><span style="color:#f92672">&gt;:</span> bl     <span style="color:#ae81ff">0x18607f9d0</span>               ; symbol stub <span style="color:#66d9ef">for</span><span style="color:#f92672">:</span> objc_claimAutoreleasedReturnValue
    <span style="color:#ae81ff">0x185d957bc</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">168</span><span style="color:#f92672">&gt;:</span> mov    x21, x0
    <span style="color:#ae81ff">0x185d957c0</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">172</span><span style="color:#f92672">&gt;:</span> bl     <span style="color:#ae81ff">0x186833120</span>               ; objc_msgSend<span style="color:#960050;background-color:#1e0010">$</span>inputDelegateManager
    <span style="color:#ae81ff">0x185d957c4</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">176</span><span style="color:#f92672">&gt;:</span> bl     <span style="color:#ae81ff">0x18607f9d0</span>               ; symbol stub <span style="color:#66d9ef">for</span><span style="color:#f92672">:</span> objc_claimAutoreleasedReturnValue
    <span style="color:#ae81ff">0x185d957c8</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">180</span><span style="color:#f92672">&gt;:</span> mov    x22, x0
    <span style="color:#ae81ff">0x185d957cc</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">184</span><span style="color:#f92672">&gt;:</span> bl     <span style="color:#ae81ff">0x186840c00</span>               ; objc_msgSend<span style="color:#960050;background-color:#1e0010">$</span>keyInputDelegate
    <span style="color:#ae81ff">0x185d957d0</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">188</span><span style="color:#f92672">&gt;:</span> bl     <span style="color:#ae81ff">0x18607f9d0</span>               ; symbol stub <span style="color:#66d9ef">for</span><span style="color:#f92672">:</span> objc_claimAutoreleasedReturnValue
    <span style="color:#ae81ff">0x185d957d4</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">192</span><span style="color:#f92672">&gt;:</span> mov    x23, x0
    <span style="color:#ae81ff">0x185d957d8</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">196</span><span style="color:#f92672">&gt;:</span> bl     <span style="color:#ae81ff">0x18607fb68</span>               ; symbol stub <span style="color:#66d9ef">for</span><span style="color:#f92672">:</span> objc_release_x23
    <span style="color:#ae81ff">0x185d957dc</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">200</span><span style="color:#f92672">&gt;:</span> bl     <span style="color:#ae81ff">0x18607fb5c</span>               ; symbol stub <span style="color:#66d9ef">for</span><span style="color:#f92672">:</span> objc_release_x22
    <span style="color:#ae81ff">0x185d957e0</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">204</span><span style="color:#f92672">&gt;:</span> bl     <span style="color:#ae81ff">0x18607fb50</span>               ; symbol stub <span style="color:#66d9ef">for</span><span style="color:#f92672">:</span> objc_release_x21
    <span style="color:#ae81ff">0x185d957e4</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">208</span><span style="color:#f92672">&gt;:</span> cmp    x23, x19
    <span style="color:#ae81ff">0x185d957e8</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">212</span><span style="color:#f92672">&gt;:</span> b.ne   <span style="color:#ae81ff">0x185d95808</span>               ; <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">244</span><span style="color:#f92672">&gt;</span>
    <span style="color:#ae81ff">0x185d957ec</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">216</span><span style="color:#f92672">&gt;:</span> ldr    x0, [x24, <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#ae81ff">0x6d8</span>]
    <span style="color:#ae81ff">0x185d957f0</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">220</span><span style="color:#f92672">&gt;:</span> bl     <span style="color:#ae81ff">0x1867d0b80</span>               ; objc_msgSend<span style="color:#960050;background-color:#1e0010">$</span>activeInstance
    <span style="color:#ae81ff">0x185d957f4</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">224</span><span style="color:#f92672">&gt;:</span> bl     <span style="color:#ae81ff">0x18607f9d0</span>               ; symbol stub <span style="color:#66d9ef">for</span><span style="color:#f92672">:</span> objc_claimAutoreleasedReturnValue
    <span style="color:#ae81ff">0x185d957f8</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">228</span><span style="color:#f92672">&gt;:</span> mov    x21, x0
    <span style="color:#ae81ff">0x185d957fc</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">232</span><span style="color:#f92672">&gt;:</span> mov    x2, x19
    <span style="color:#ae81ff">0x185d95800</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">236</span><span style="color:#f92672">&gt;:</span> bl     <span style="color:#ae81ff">0x186888640</span>               ; objc_msgSend<span style="color:#960050;background-color:#1e0010">$</span>setDelegate:
    <span style="color:#ae81ff">0x185d95804</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">240</span><span style="color:#f92672">&gt;:</span> bl     <span style="color:#ae81ff">0x18607fb50</span>               ; symbol stub <span style="color:#66d9ef">for</span><span style="color:#f92672">:</span> objc_release_x21
    <span style="color:#ae81ff">0x185d95808</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">244</span><span style="color:#f92672">&gt;:</span> adrp   x8, <span style="color:#ae81ff">371433</span>
    <span style="color:#ae81ff">0x185d9580c</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">248</span><span style="color:#f92672">&gt;:</span> ldr    x21, [x8, <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#ae81ff">0x398</span>]
    <span style="color:#ae81ff">0x185d95810</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">252</span><span style="color:#f92672">&gt;:</span> mov    x0, x19
    <span style="color:#ae81ff">0x185d95814</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">256</span><span style="color:#f92672">&gt;:</span> bl     <span style="color:#ae81ff">0x186878b60</span>               ; objc_msgSend<span style="color:#960050;background-color:#1e0010">$</span>semanticContentAttribute
    <span style="color:#ae81ff">0x185d95818</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">260</span><span style="color:#f92672">&gt;:</span> mov    x2, x0
    <span style="color:#ae81ff">0x185d9581c</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">264</span><span style="color:#f92672">&gt;:</span> mov    x0, x21
    <span style="color:#ae81ff">0x185d95820</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">268</span><span style="color:#f92672">&gt;:</span> bl     <span style="color:#ae81ff">0x1868e3b40</span>               ; objc_msgSend<span style="color:#960050;background-color:#1e0010">$</span>userInterfaceLayoutDirectionForSemanticContentAttribute:
    <span style="color:#ae81ff">0x185d95824</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">272</span><span style="color:#f92672">&gt;:</span> cmp    x0, <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#ae81ff">0x1</span>
    <span style="color:#ae81ff">0x185d95828</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">276</span><span style="color:#f92672">&gt;:</span> b.ne   <span style="color:#ae81ff">0x185d95848</span>               ; <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">308</span><span style="color:#f92672">&gt;</span>
    <span style="color:#ae81ff">0x185d9582c</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">280</span><span style="color:#f92672">&gt;:</span> mov    x0, x19
    <span style="color:#ae81ff">0x185d95830</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">284</span><span style="color:#f92672">&gt;:</span> bl     <span style="color:#ae81ff">0x1868d07c0</span>               ; objc_msgSend<span style="color:#960050;background-color:#1e0010">$</span>textAlignment
    <span style="color:#ae81ff">0x185d95834</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">288</span><span style="color:#f92672">&gt;:</span> cmp    x0, <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#ae81ff">0x4</span>
    <span style="color:#ae81ff">0x185d95838</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">292</span><span style="color:#f92672">&gt;:</span> b.ne   <span style="color:#ae81ff">0x185d95848</span>               ; <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">308</span><span style="color:#f92672">&gt;</span>
    <span style="color:#ae81ff">0x185d9583c</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">296</span><span style="color:#f92672">&gt;:</span> mov    x0, x19
    <span style="color:#ae81ff">0x185d95840</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">300</span><span style="color:#f92672">&gt;:</span> mov    w2, <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#ae81ff">0x2</span>                  ; <span style="color:#f92672">=</span><span style="color:#ae81ff">2</span> 
    <span style="color:#ae81ff">0x185d95844</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">304</span><span style="color:#f92672">&gt;:</span> bl     <span style="color:#ae81ff">0x1868b1ba0</span>               ; objc_msgSend<span style="color:#960050;background-color:#1e0010">$</span>setTextAlignment:
    <span style="color:#ae81ff">0x185d95848</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">308</span><span style="color:#f92672">&gt;:</span> cbz    w20, <span style="color:#ae81ff">0x185d95860</span>          ; <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">332</span><span style="color:#f92672">&gt;</span>
    <span style="color:#ae81ff">0x185d9584c</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">312</span><span style="color:#f92672">&gt;:</span> mov    x0, x19
    <span style="color:#ae81ff">0x185d95850</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">316</span><span style="color:#f92672">&gt;:</span> bl     <span style="color:#ae81ff">0x1868786c0</span>               ; objc_msgSend<span style="color:#960050;background-color:#1e0010">$</span>selectionRange
    <span style="color:#ae81ff">0x185d95854</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">320</span><span style="color:#f92672">&gt;:</span> cbz    x1, <span style="color:#ae81ff">0x185d95860</span>           ; <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">332</span><span style="color:#f92672">&gt;</span>
    <span style="color:#ae81ff">0x185d95858</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">324</span><span style="color:#f92672">&gt;:</span> mov    x0, x19
    <span style="color:#ae81ff">0x185d9585c</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">328</span><span style="color:#f92672">&gt;:</span> bl     <span style="color:#ae81ff">0x186876fc0</span>               ; objc_msgSend<span style="color:#960050;background-color:#1e0010">$</span>selectAll
    <span style="color:#ae81ff">0x185d95860</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">332</span><span style="color:#f92672">&gt;:</span> mov    x0, x19
    <span style="color:#ae81ff">0x185d95864</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">336</span><span style="color:#f92672">&gt;:</span> bl     <span style="color:#ae81ff">0x1868359e0</span>               ; objc_msgSend<span style="color:#960050;background-color:#1e0010">$</span>interactionAssistant
    <span style="color:#ae81ff">0x185d95868</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">340</span><span style="color:#f92672">&gt;:</span> bl     <span style="color:#ae81ff">0x18607f9d0</span>               ; symbol stub <span style="color:#66d9ef">for</span><span style="color:#f92672">:</span> objc_claimAutoreleasedReturnValue
    <span style="color:#ae81ff">0x185d9586c</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">344</span><span style="color:#f92672">&gt;:</span> str    x0, [sp, <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#ae81ff">0x8</span>]
    <span style="color:#ae81ff">0x185d95870</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">348</span><span style="color:#f92672">&gt;:</span> bl     <span style="color:#ae81ff">0x1868de180</span>               ; objc_msgSend<span style="color:#960050;background-color:#1e0010">$</span>updateDisplayedSelection
    <span style="color:#ae81ff">0x185d95874</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">352</span><span style="color:#f92672">&gt;:</span> ldr    x0, [sp, <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#ae81ff">0x8</span>]
    <span style="color:#ae81ff">0x185d95878</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">356</span><span style="color:#f92672">&gt;:</span> ldp    x29, x30, [sp, <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#ae81ff">0x40</span>]
    <span style="color:#ae81ff">0x185d9587c</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">360</span><span style="color:#f92672">&gt;:</span> ldp    x20, x19, [sp, <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#ae81ff">0x30</span>]
    <span style="color:#ae81ff">0x185d95880</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">364</span><span style="color:#f92672">&gt;:</span> ldp    x22, x21, [sp, <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#ae81ff">0x20</span>]
    <span style="color:#ae81ff">0x185d95884</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">368</span><span style="color:#f92672">&gt;:</span> ldp    x24, x23, [sp, <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#ae81ff">0x10</span>]
    <span style="color:#ae81ff">0x185d95888</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">372</span><span style="color:#f92672">&gt;:</span> add    sp, sp, <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#ae81ff">0x50</span>
    <span style="color:#ae81ff">0x185d9588c</span> <span style="color:#f92672">&lt;+</span><span style="color:#ae81ff">376</span><span style="color:#f92672">&gt;:</span> b      <span style="color:#ae81ff">0x18607fb08</span>               ; symbol stub <span style="color:#66d9ef">for</span><span style="color:#f92672">:</span> objc_release
</code></pre></div><p>å¯¹äºè¿™æ®µç¨‹åºï¼Œæœ‰ 3 å¤„ä½ç½®å€¼å¾—æ³¨æ„ï¼š</p>
<ul>
<li>18è¡Œçš„ <code>setDocumentObsecured:</code></li>
<li>27è¡Œçš„ <code>setSecureTextEntry:</code></li>
<li>38è¡Œçš„ <code>setDisableUpdateMask:</code></li>
</ul>
<p>ä¸ºäº†ç­›é€‰è¿™äº›ä»£ç æ˜¯å“ªé‡ŒçœŸæ­£æœ‰æ•ˆï¼Œæˆ‘ä»¬å¯ä»¥å•æ­¥è°ƒè¯•åˆ°è¿™äº›è¡Œï¼Œç„¶åä½¿ç”¨å‘½ä»¤</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift">(lldb) thread <span style="color:#66d9ef">return</span>
</code></pre></div><p>è·³è¿‡å…¶åçš„ä»£ç ï¼Œé€šè¿‡å½“å‰æˆªå±æ˜¯å¦æ­£å¸¸ç”Ÿæ•ˆæ¥ç¡®å®šè¿è¡Œè¿‡çš„ä»£ç æ˜¯å¦èµ·ä½œç”¨ã€‚</p>
<p>æ— è®ºæˆ‘ä»¬å®šä½åˆ° 18 è¡Œè¿˜æ˜¯ 27 è¡Œï¼Œåœ¨ä½¿ç”¨ <code>thread return</code> å‘½ä»¤åéƒ½ä¼šå‡ºç°åœ¨å¯†ç è¾“å…¥æ¡†è¾“å…¥çš„æ–‡å­—æ˜¯ &ldquo;Â·&quot;ï¼Œè€Œæˆªå±åçš„è¿™äº›å­—ç¬¦å¹¶ä¸ä¼šæ¶ˆå¤±ã€‚ç›´åˆ°ç¬¬ 38 è¡Œã€‚</p>
<p>äºæ˜¯æˆ‘ä»¬æ–­ç‚¹åˆ°ç¬¬ 38 è¡Œï¼Œè¾“å…¥å‘½ä»¤</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift">(lldb) po <span style="color:#960050;background-color:#1e0010">$</span>x0
&lt;CALayer:<span style="color:#ae81ff">0x600000287100</span>; position = CGPoint (<span style="color:#ae81ff">0</span> <span style="color:#ae81ff">0</span>); bounds = CGRect (<span style="color:#ae81ff">0</span> <span style="color:#ae81ff">0</span>; <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">0</span>); delegate = &lt;_UITextLayoutCanvasView: <span style="color:#ae81ff">0x111021eb0</span>; frame = (<span style="color:#ae81ff">0</span> <span style="color:#ae81ff">0</span>; <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">0</span>); layer = &lt;CALayer: <span style="color:#ae81ff">0x600000287100</span>&gt;<span style="color:#f92672">&gt;</span>; opaque = YES; allowsGroupOpacity = YES; <span style="color:#f92672">&gt;</span>
</code></pre></div><p>å¾—çŸ¥å½“å‰è°ƒç”¨ <code>setDisableUpdateMask:</code> æ˜¯ <code>CALayer</code> ã€‚ç„¶åå†å°è¯•æ–­ç‚¹ç¬¬ 34 è¡Œï¼Œå¹¶å†æ¬¡è¾“å…¥</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#f92672">(</span>lldb<span style="color:#f92672">)</span> po $x0
&lt;_UITextLayoutCanvasView: 0x106021100; frame <span style="color:#f92672">=</span> <span style="color:#f92672">(</span><span style="color:#ae81ff">0</span> 0; <span style="color:#ae81ff">0</span> 0<span style="color:#f92672">)</span>; layer <span style="color:#f92672">=</span> &lt;CALayer: 0x6000002884c0&gt;&gt;
</code></pre></div><p>å¾—çŸ¥å¯¹åº” view æ˜¯ <code>_UITextLayoutCanvasView</code> ï¼Œå¹¶è·Ÿæ®åç¼–è¯‘ç»“æœ</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-objectivec" data-lang="objectivec">[<span style="color:#f92672">*</span>(r19 <span style="color:#f92672">+</span> sign_extend_64(<span style="color:#f92672">*</span>(int32_t <span style="color:#f92672">*</span>)<span style="color:#ae81ff">0x1e68ec204</span>)) layer];
</code></pre></div><p>ç„¶åæŸ¥æ‰¾åœ°å€ <code>0x1e68ec204</code> åï¼Œå‘ç°æ˜¯åŸ <code>UITextField</code> çš„ä¸€ä¸ªå­ viewï¼š<code>-[UITextField _textCanvasView]</code>ã€‚</p>
<p>å› æ­¤æˆ‘æœ‰ä¸€ä¸ªå¤§èƒ†çš„çŒœæµ‹ï¼Œåªéœ€è°ƒç”¨ä»»æ„ <code>CALayer</code> çš„ <code>setDisableUpdateMask:</code> æ–¹æ³•å³å¯åœ¨æˆªå±éšè—å½“å‰ <code>CALayer</code> çš„å†…å®¹ï¼Œå…¶å¯¹åº”å‚æ•°æ˜¯å­˜å‚¨åœ¨ x2 å¯„å­˜å™¨å­˜å‚¨çš„å€¼ã€‚è€Œ x2 çš„å€¼æ˜¯åœ¨ 29 è¡Œ <code>mov w8, #0x12</code> èµ‹å€¼çš„ã€‚äºæ˜¯çŒœæµ‹è¯¥æ–¹æ³•çš„å‚æ•°æ˜¯ä¸€ä¸ªæšä¸¾å€¼ã€‚åœ¨è¿™é‡Œè¯¥å€¼ä¸º <code>0x12</code> ã€‚</p>
<p>å› æ­¤ï¼Œç»™ <code>CALayer</code> æ‰©å±•è¯¥æ–¹æ³•ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-objectivec" data-lang="objectivec"><span style="color:#66d9ef">@interface</span> <span style="color:#a6e22e">CALayer</span> ()

<span style="color:#f92672">-</span> (<span style="color:#66d9ef">void</span>)setDisableUpdateMask:(<span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">int</span>)aValue;

<span style="color:#66d9ef">@end</span>
</code></pre></div><p>ç„¶åæˆ‘ä»¬å¯ä»¥å®ç°ä¹‹å‰æœªå®Œæˆçš„ <code>HideWhenTakingScreenshot</code> ï¼Œå¹¶ç»™ <code>setDisableUpdateMask</code> æ–¹æ³•ä¼ å…¥å‚æ•°<code>0x12</code> ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">HideWhenTakingScreenshot</span>: UIViewRepresentable {
    <span style="color:#66d9ef">var</span> color: UIColor = .black
    
    <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">makeUIView</span>(context: Context) -&gt; UIView {
        <span style="color:#66d9ef">let</span> view = UIView()
        view.layer.setDisableUpdateMask(<span style="color:#ae81ff">0x12</span>)
        <span style="color:#66d9ef">return</span> view
    }
    
    <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">updateUIView</span>(<span style="color:#66d9ef">_</span> uiView: UIView, context: Context) {
        uiView.backgroundColor = color
    }
}
</code></pre></div><p>æœ€åï¼Œåªéœ€è¦å°† <code>content</code> å®ç°ä¸ºæƒ³è¦çš„æ•ˆæœå³å¯ï¼Œæ¯”å¦‚ <code>Text(&quot;Watermark&quot;)</code> ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift">Text(<span style="color:#e6db74">&#34;Watermark&#34;</span>)
    .mask {
        ZStack {
            Color.white
            HideWhenTakingScreenshot()
        }
        .compositingGroup()
        .luminanceToAlpha()
    }
</code></pre></div><p><img src="assets/watermark.png" alt="watermark"></p>
<hr>

</div>
  <footer class="post-footer">
    <nav class="paginav">
      <a class="next" href="https://clox.nu/blog/back-4u-is-now-online/">
        <span class="title">Next Page Â»</span>
        <br>
        <span>ã€ŒBACK 4Uã€ä¸Šæ¶å•¦ğŸ‰</span>
      </a>
    </nav>
  </footer>
</article>
    </main><footer class="footer">
    <span>&copy; 2024 <a href="https://clox.nu/">cloxnu&#39;s Creative Space</a></span>
    <span>&middot;</span>
    <span>Powered by <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a></span>
    <span>&middot;</span>
    <span>Theme <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a></span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)">
    <button class="top-link" id="top-link" type="button" accesskey="g">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
            <path d="M12 6H0l6-6z" />
        </svg>
    </button>
</a><div id="utter-container"></div>
<script src="https://utteranc.es/client.js"
    repo= 'cloxnu/clox.nu'
    issue-term= "pathname"
    theme= 'preferred-color-scheme'
    crossorigin= "anonymous"
    async>
</script>
<script defer src="/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js" integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5&#43;kdJvBz5iKbt6B5PJI="
    onload="hljs.initHighlightingOnLoad();"></script>
<script>
    window.onload = function () {
        if (localStorage.getItem("menu-scroll-position")) {
            document.getElementById('menu').scrollLeft = localStorage.getItem("menu-scroll-position");
        }
    }
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

    function menu_on_scroll() {
        localStorage.setItem("menu-scroll-position", document.getElementById('menu').scrollLeft);
    }

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>

</body>

</html>
